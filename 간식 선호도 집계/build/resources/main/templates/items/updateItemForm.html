<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous">
</script>
<head th:replace="fragments/header :: header" />
<body>
<div class="container">
    <div th:replace="fragments/bodyHeader :: bodyHeader"/>
    <form id="form" th:object="${form}" method="post">
        <!-- id -->
        <input type="hidden" th:field="*{id}" />
        <div class="form-group">
            <label th:for="name">간식명</label>
            <input type="text" th:field="*{name}" class="form-control"
                   placeholder="간식명을 입력해주세요" />
        </div>
        <button id="update" type="button" class="btn btn-primary">수정</button>
        <button id="delete" type="button" class="btn btn-danger">삭제</button>
    </form>
    <div th:replace="fragments/footer :: footer" />
</div> <!-- /container -->
</body>
</html>
<script>
    $("#update").click(function(){
        $("#form").submit();
    })
    $("#delete").click(function(){
        let queryString = $("#form").serialize();
        $.ajax({
            type: "POST",
            url: "/items/delete",
            data: queryString,
            success : function(result){
                let request = result.status;
                if(request === "OK") {
                    location.replace('/items');
                } else {
                    alert("error");
                }
            },
            error : function(a, b, c){
                alert(a + b + c);
            }
        });
    })
</script>